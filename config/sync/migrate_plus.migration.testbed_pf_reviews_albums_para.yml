uuid: c056cd05-a8ce-4a4d-96b3-7682dff31ac6
langcode: en
status: true
dependencies: {  }
id: testbed_pf_reviews_albums_para
class: null
field_plugin_method: null
cck_plugin_method: null
migration_tags: null
migration_group: testbed_pf_reviews
label: 'Migrate albums from pf csv exports'
source:
  plugin: csv
  path: ../kaggle-data/csv/tombstones.csv
  delimiter: ','
  header_row_count: 1
  ids:
    - review_tombstone_id
process:
  type:
    plugin: default_value
    default_value: album_detail
  field_album_id: review_tombstone_id
  tmp_years_explode:
    -
      plugin: callback
      callable: json_decode
      source: years
  field_album_year: '@tmp_years_explode'
  field_album_best_new: best_new_music
  field_album_best_reissues: best_new_reissue
  tmp_label_explode:
    -
      plugin: callback
      callable: json_decode
      source: labels
  field_album_label:
    plugin: entity_generate
    value_key: name
    bundle: label
    entity_type: taxonomy_term
    ignore_case: true
    source: '@tmp_label_explode'
  field_album_rating:
    plugin: callback
    callable: floatval
    source: score
  field_album_title: title
destination:
  plugin: 'entity_reference_revisions:paragraph'
  default_bundle: album_detail
idMap: {  }
migration_dependencies: null
include: null
